markdown
# N0DΞ — Tour Operating System (blueriot)

## What this project is

N0DΞ is **not a single web app**, but an **ecosystem of tools** designed to support
real tour leaders and passengers during real tours.

It produces:
- a **backend operating system** for tour leaders
- a **public mini-site** for passengers (mobile-first)
- a **shared knowledge base** across tours and leaders

The system is designed for:
- bad connectivity
- offline usage
- physical fatigue
- complex logistics
- human error

Offline-first is **mandatory**, not optional.

---

## Core philosophy (non-negotiable)

- If it does not work offline, it is not acceptable
- Automation must assist, never decide
- Tour Leader is always in control
- Passengers never configure anything
- OCR suggests, it never overrides
- Calm UI > feature quantity
- Dark mode by default (battery, contrast, readability)

This project is **system-first**, not UI-first.

---

## Roles

Exactly four roles are supported:

- **ADMIN**
  - full system control
- **TOUR_LEADER (TL)**
  - creates and manages tours
- **TRAINEE**
  - assists TL (draft-only permissions)
- **PASSENGER**
  - read-only access to the mini-site

No other roles are allowed.

---

## Ecosystem overview

N0DΞ is part of a larger ecosystem:

```

ECOSYSTEM
├── ΤΔSΤΞ5  (TASTES)   → food & places knowledge base
├── R0UT35  (ROUTES)   → transport & mobility knowledge base
├── SΤΔΥ    (STAY)     → accommodation knowledge base
└── N0DΞ    (NODE)     → tour operating system

```

Each module has a **specific responsibility** and must not overlap incorrectly.

---

## ΤΔSΤΞ5 — TASTES (Food & Places Database)

ΤΔSΤΞ5 is a **shared, growing database** of:
- restaurants
- refuges
- huts
- cafés
- food-related places

### Core rules

- ΤΔSΤΞ5 is **writeable by Tour Leaders**
- Data added during a tour **can be reused by other tours**
- Data added via N0DΞ widgets **can be saved into ΤΔSΤΞ5**

### Integration with N0DΞ

When a TL creates:
- **Food (group)**
- **Food suggestion**
- **Lunch / Dinner widget**

They can:
- select an existing entry from ΤΔSΤΞ5
- OR create a new place

If a new place is created:
- it can optionally be **saved into ΤΔSΤΞ5**
- becomes available for future tours and leaders

OCR-detected food places are:
- suggested only
- never auto-saved
- require confirmation

ΤΔSΤΞ5 is **active** and **central** to the ecosystem.

---

## SΤΔΥ — STAY (Accommodation Database)

SΤΔΥ is a **structured database** of accommodations:
- hotels
- tour leader hotels
- transfer hotels

### Core rules

- SΤΔΥ is **not interactive for passengers**
- Used only by TL and Admin
- Contains operational data:
  - contacts
  - services
  - rules
  - notes

### Integration with N0DΞ

- Hotel / Accommodation widgets in N0DΞ
  pull data directly from SΤΔΥ
- No commercial logic is exposed to passengers
- SΤΔΥ is **read-only for widgets**
- No automatic saving from N0DΞ into SΤΔΥ without confirmation

SΤΔΥ is **stable infrastructure**, not dynamic content.

---

## R0UT35 — ROUTES (Mobility Knowledge Base)

R0UT35 is a **passive knowledge database**:
- transport providers
- NCC
- trains
- ferries
- mobility notes

### Core rules

- R0UT35 does **not manage tickets**
- R0UT35 does **not control transport execution**
- Used for:
  - reference
  - suggestions
  - historical knowledge

### Integration with N0DΞ

- N0DΞ transport widgets do **not sync automatically** with R0UT35
- TL manually chooses what to use
- R0UT35 exists to **reduce friction**, not to automate transport

R0UT35 is **informational**, not operational.

---

## N0DΞ — Node (Tour Operating System)

N0DΞ is a **mini-site builder for tours**.

Each N0DΞ site:
- is identified by a **tour code**
- has a **start & end date**
- contains a **day-by-day calendar**
- each day contains **widgets**

Output:
- a **public passenger mini-site**
- a **backend operating interface** for TL

---

## Widgets (conceptual)

Widgets are the atomic units of the system.

### Categories

#### Basic Info
- Base information
- Location
- Transport

#### Activities (mandatory / contract)
- Activity (walk)
- Cultural activity
- Sport activity

#### Suggestions (optional)
- Sport suggestion
- Cultural suggestion
- Food suggestion

#### Group Services
- Food (group)
- Transport
- Tickets

#### System
- Weather
- Wallet
- OCR
- Announcements

Widgets can be:
- day-bound
- global
- reorderable

---

## Announcements (not chat)

Announcements are:
- one-way messages
- sent by TL or Admin
- received by all passengers
- linked to tour or day

No replies.  
No chat.  
No reactions.

They may be:
- manual
- auto-generated by widgets (time-based events)

---

## Offline-first rules

The system must support these states:

- SYNCED
- LOCAL_EDIT
- PENDING_SYNC
- CONFLICT

Rules:
- read is always available
- write is always local first
- sync happens when possible
- conflicts are explicit and visible

Passenger mini-site must be **fully readable offline**.

---

## OCR philosophy

OCR is an **assistant**, not an authority.

Used for:
- tour PDFs
- passenger manifests
- tickets

OCR output:
- suggested data only
- requires confirmation
- never auto-publishes

---

## Wallet & Tickets

The system provides a **BlueRiot internal wallet**.

Rules:
- PDF-based
- fully offline accessible
- passenger read-only
- external wallets (Apple / Google) are linked only, not managed

---

## UI & visual principles

- Dark mode by default
- High contrast
- Minimal animations
- Mobile-first
- Touch-friendly
- No visual noise

UI must reduce cognitive load, not add it.

---

## Build order (mandatory)

Development must follow this order:

1. **Foundation**
   - roles
   - permissions
   - data model
   - offline states

2. **Core Node**
   - create tour
   - calendar
   - empty widget system

3. **Databases**
   - ΤΔSΤΞ5
   - SΤΔΥ
   - R0UT35

4. **Single widgets**
   - one at a time
   - no automation initially

5. **Integrations**
   - OCR
   - semantic location
   - notifications

Skipping steps is not allowed.

---

## Current constraints

- GitHub: free (public repository)
- Supabase: free tier
- No paid services assumed
- Architecture must respect these limits

---

## What this repository is NOT

- not a chat app
- not a booking engine
- not a payment platform
- not a CMS
- not a social network

---

## Final note

This system is built for **real tours**, not ideal demos.

If something feels calm, it is correct.
If something feels fragile, it is wrong.

Build slow.  
Build solid.
